/*!
 * matter-js-workletized 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Matter",[],e):"object"==typeof exports?exports.Matter=e():t.Matter=e()}(this,(function(){return function(t){var e={};function o(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=18)}([function(t,e){t.exports=function(){if(!global.Matter||!global.Matter.Common){global.Matter||(global.Matter={}),global.Matter.Common={};var t=global.Matter.Common;t._baseDelta=1e3/60,t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t._warnedOnce={},t._decomp=null,t.extend=function(e,o){var a,r;"boolean"==typeof o?(a=2,r=o):(a=1,r=!0);for(var n=a;n<arguments.length;n++){var i=arguments[n];if(i)for(var l in i)r&&i[l]&&i[l].constructor===Object?e[l]&&e[l].constructor!==Object?e[l]=i[l]:(e[l]=e[l]||{},t.extend(e[l],r,i[l])):e[l]=i[l]}return e},t.clone=function(e,o){return t.extend({},o,e)},t.keys=function(t){return Object.keys?Object.keys(t):Object.getOwnPropertyNames(t)},t.values=function(e){return t.keys(e).map(t=>e[t])},t.get=function(t,e,o,a){e=e.split(".").slice(o,a);for(var r=0;r<e.length;r++)t=t[e[r]];return t},t.set=function(e,o,a,r,n){var i=o.split(".").slice(r,n);return t.get(e,o,0,-1)[i[i.length-1]]=a,a},t.shuffle=function(e){for(var o=e.length-1;o>0;o--){var a=Math.floor(t.random()*(o+1));[e[o],e[a]]=[e[a],e[o]]}return e},t.choose=function(e){return e[Math.floor(t.random()*e.length)]},t.isArray=function(t){return Array.isArray(t)},t.isFunction=function(t){return"function"==typeof t},t.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},t.isString=function(t){return"string"==typeof t},t.clamp=function(t,e,o){return Math.max(e,Math.min(o,t))},t.sign=function(t){return t<0?-1:1},t.now=function(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()},t.random=function(t=0,o=1){return t+e()*(o-t)};var e=function(){return t._seed=(9301*t._seed+49297)%233280,t._seed/233280};t.colorToNumber=function(t){return 3===(t=t.replace("#","")).length&&(t=t.split("").map(t=>t+t).join("")),parseInt(t,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log("matter-js:",...arguments)},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info("matter-js:",...arguments)},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn("matter-js:",...arguments)},t.warnOnce=function(){var e=Array.from(arguments).join(" ");t._warnedOnce[e]||(t.warn(e),t._warnedOnce[e]=!0)},t.deprecated=function(e,o,a){e[o]=function(){return t.warnOnce("ðŸ”… deprecated ðŸ”…",a),e[o].__original.apply(this,arguments)},e[o].__original=e[o]},t.nextId=function(){return t._nextId++},t.indexOf=function(t,e){return t.indexOf?t.indexOf(e):[].indexOf.call(t,e)},t.map=function(t,e){return t.map?t.map(e):Array.from(t,e)},t.topologicalSort=function(e){var o=[],a={},r={};for(var n in e)a[n]||r[n]||t._topologicalSort(n,a,r,e,o);return o},t._topologicalSort=function(e,o,a,r,n){var i=r[e]||[];for(var l of(a[e]=!0,i))a[l]||o[l]||t._topologicalSort(l,o,a,r,n);a[e]=!1,o[e]=!0,n.push(e)}}}},function(t,e){t.exports=function(){if(!global.Matter||!global.Matter.Vector){global.Matter||(global.Matter={}),global.Matter.Vector={};var t=global.Matter.Vector;t.create=function(t,e){return{x:t||0,y:e||0}},t.clone=function(t){return{x:t.x,y:t.y}},t.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},t.rotate=function(t,e,o){var a=Math.cos(e),r=Math.sin(e);o||(o={});var n=t.x*a-t.y*r;return o.y=t.x*r+t.y*a,o.x=n,o},t.rotateAbout=function(t,e,o,a){var r=Math.cos(e),n=Math.sin(e);a||(a={});var i=o.x+(t.x-o.x)*r-(t.y-o.y)*n;return a.y=o.y+(t.x-o.x)*n+(t.y-o.y)*r,a.x=i,a},t.normalise=function(e){var o=t.magnitude(e);return 0===o?{x:0,y:0}:{x:e.x/o,y:e.y/o}},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.cross3=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(e.y-t.y)*(o.x-t.x)},t.add=function(t,e,o){return o||(o={}),o.x=t.x+e.x,o.y=t.y+e.y,o},t.sub=function(t,e,o){return o||(o={}),o.x=t.x-e.x,o.y=t.y-e.y,o},t.mult=function(t,e){return{x:t.x*e,y:t.y*e}},t.div=function(t,e){return{x:t.x/e,y:t.y/e}},t.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},t.neg=function(t){return{x:-t.x,y:-t.y}},t.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}}},function(t,e,o){var a=o(1),r=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Vertices){global.Matter||(global.Matter={}),global.Matter.Vertices={};var t=global.Matter.Vertices;a(),r(),t.create=function(t,e){for(var o=[],a=0;a<t.length;a++){var r=t[a],n={x:r.x,y:r.y,index:a,body:e,isInternal:!1};o.push(n)}return o},t.fromPath=function(e,o){var a=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,o){a.push({x:parseFloat(e),y:parseFloat(o)})})),t.create(a,o)},t.centre=function(e){for(var o,a,r,n=t.area(e,!0),i={x:0,y:0},l=0;l<e.length;l++)r=(l+1)%e.length,o=global.Matter.Vector.cross(e[l],e[r]),a=global.Matter.Vector.mult(global.Matter.Vector.add(e[l],e[r]),o),i=global.Matter.Vector.add(i,a);return global.Matter.Vector.div(i,6*n)},t.mean=function(t){for(var e={x:0,y:0},o=0;o<t.length;o++)e.x+=t[o].x,e.y+=t[o].y;return global.Matter.Vector.div(e,t.length)},t.area=function(t,e){for(var o=0,a=t.length-1,r=0;r<t.length;r++)o+=(t[a].x-t[r].x)*(t[a].y+t[r].y),a=r;return e?o/2:Math.abs(o)/2},t.inertia=function(t,e){for(var o,a,r=0,n=0,i=t,l=0;l<i.length;l++)a=(l+1)%i.length,r+=(o=Math.abs(global.Matter.Vector.cross(i[a],i[l])))*(global.Matter.Vector.dot(i[a],i[a])+global.Matter.Vector.dot(i[a],i[l])+global.Matter.Vector.dot(i[l],i[l])),n+=o;return e/6*(r/n)},t.translate=function(t,e,o){o=void 0!==o?o:1;var a,r=t.length,n=e.x*o,i=e.y*o;for(a=0;a<r;a++)t[a].x+=n,t[a].y+=i;return t},t.rotate=function(t,e,o){if(0!==e){var a,r,n,i,l=Math.cos(e),s=Math.sin(e),c=o.x,g=o.y,u=t.length;for(i=0;i<u;i++)r=(a=t[i]).x-c,n=a.y-g,a.x=c+(r*l-n*s),a.y=g+(r*s+n*l);return t}},t.contains=function(t,e){for(var o,a=e.x,r=e.y,n=t.length,i=t[n-1],l=0;l<n;l++){if(o=t[l],(a-i.x)*(o.y-i.y)+(r-i.y)*(i.x-o.x)>0)return!1;i=o}return!0},t.scale=function(e,o,a,r){if(1===o&&1===a)return e;var n,i;r=r||t.centre(e);for(var l=0;l<e.length;l++)n=e[l],i=global.Matter.Vector.sub(n,r),e[l].x=r.x+i.x*o,e[l].y=r.y+i.y*a;return e},t.chamfer=function(t,e,o,a,r){e="number"==typeof e?[e]:e||[8],o=void 0!==o?o:-1,a=a||2,r=r||14;for(var n=[],i=0;i<t.length;i++){var l=t[i-1>=0?i-1:t.length-1],s=t[i],c=t[(i+1)%t.length],g=e[i<e.length?i:e.length-1];if(0!==g){var u=global.Matter.Vector.normalise({x:s.y-l.y,y:l.x-s.x}),p=global.Matter.Vector.normalise({x:c.y-s.y,y:s.x-c.x}),d=Math.sqrt(2*Math.pow(g,2)),b=global.Matter.Vector.mult(global.Matter.Common.clone(u),g),f=global.Matter.Vector.normalise(global.Matter.Vector.mult(global.Matter.Vector.add(u,p),.5)),v=global.Matter.Vector.sub(s,global.Matter.Vector.mult(f,d)),m=o;-1===o&&(m=1.75*Math.pow(g,.32)),(m=global.Matter.Common.clamp(m,a,r))%2==1&&(m+=1);for(var y=Math.acos(global.Matter.Vector.dot(u,p))/m,M=0;M<m;M++)n.push(global.Matter.Vector.add(global.Matter.Vector.rotate(b,y*M),v))}else n.push(s)}return n},t.clockwiseSort=function(e){var o=t.mean(e);return e.sort((function(t,e){return global.Matter.Vector.angle(o,t)-global.Matter.Vector.angle(o,e)})),e},t.isConvex=function(t){var e,o,a,r,n=0,i=t.length;if(i<3)return null;for(e=0;e<i;e++)if(a=(e+2)%i,(r=(t[o=(e+1)%i].x-t[e].x)*(t[a].y-t[o].y)-(t[o].y-t[e].y)*(t[a].x-t[o].x))<0?n|=1:r>0&&(n|=2),3===n)return!1;return 0!==n||null},t.hull=function(t){var e,o,a=[],r=[];for((t=t.slice(0)).sort((function(t,e){var o=t.x-e.x;return 0!==o?o:t.y-e.y})),o=0;o<t.length;o+=1){for(e=t[o];r.length>=2&&global.Matter.Vector.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}for(o=t.length-1;o>=0;o-=1){for(e=t[o];a.length>=2&&global.Matter.Vector.cross3(a[a.length-2],a[a.length-1],e)<=0;)a.pop();a.push(e)}return a.pop(),r.pop(),a.concat(r)}}}},function(t,e){t.exports=function(){if(!global.Matter||!global.Matter.Bounds){global.Matter||(global.Matter={}),global.Matter.Bounds={};var t=global.Matter.Bounds;t.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(o,e),o},t.update=function(t,e,o){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<e.length;a++){var r=e[a];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}o&&(o.x>0?t.max.x+=o.x:t.min.x+=o.x,o.y>0?t.max.y+=o.y:t.min.y+=o.y)},t.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},t.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},t.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},t.shift=function(t,e){var o=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+o,t.min.y=e.y,t.max.y=e.y+a}}}},function(t,e,o){var a=o(2),r=o(1),n=o(5),i=o(0),l=o(3),s=o(8);t.exports=function(){if(!global.Matter||!global.Matter.Body){global.Matter||(global.Matter={}),global.Matter.Body={};var t=global.Matter.Body;a(),r(),n(),i(),l(),s(),t._timeCorrection=!0,t._inertiaScale=4,t._nextCollidingGroupId=1,t._nextNonCollidingGroupId=-1,t._nextCategory=1,t._baseDelta=1e3/60,t.create=function(t){var o={id:global.Matter.Common.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:global.Matter.Vertices.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:1e3/60,_original:null},a=global.Matter.Common.extend(o,t);return e(a,t),a},t.nextGroup=function(e){return e?t._nextNonCollidingGroupId--:t._nextCollidingGroupId++},t.nextCategory=function(){return t._nextCategory=t._nextCategory<<1,t._nextCategory};var e=function(e,o){o=o||{},t.set(e,{bounds:e.bounds||global.Matter.Bounds.create(e.vertices),positionPrev:e.positionPrev||global.Matter.Vector.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),global.Matter.Vertices.rotate(e.vertices,e.angle,e.position),global.Matter.Axes.rotate(e.axes,e.angle),global.Matter.Bounds.update(e.bounds,e.vertices,e.velocity),t.set(e,{axes:o.axes||e.axes,area:o.area||e.area,mass:o.mass||e.mass,inertia:o.inertia||e.inertia});var a=e.isStatic?"#14151f":global.Matter.Common.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),r=e.isStatic?"#555":"#ccc",n=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||a,e.render.strokeStyle=e.render.strokeStyle||r,e.render.lineWidth=e.render.lineWidth||n,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};t.set=function(e,o,a){var r;for(r in"string"==typeof o&&(r=o,(o={})[r]=a),o)if(Object.prototype.hasOwnProperty.call(o,r))switch(a=o[r],r){case"isStatic":t.setStatic(e,a);break;case"isSleeping":global.Matter.Sleeping.set(e,a);break;case"mass":t.setMass(e,a);break;case"density":t.setDensity(e,a);break;case"inertia":t.setInertia(e,a);break;case"vertices":t.setVertices(e,a);break;case"position":t.setPosition(e,a);break;case"angle":t.setAngle(e,a);break;case"velocity":t.setVelocity(e,a);break;case"angularVelocity":t.setAngularVelocity(e,a);break;case"speed":t.setSpeed(e,a);break;case"angularSpeed":t.setAngularSpeed(e,a);break;case"parts":t.setParts(e,a);break;case"centre":t.setCentre(e,a);break;default:e[r]=a}},t.setStatic=function(t,e){for(var o=0;o<t.parts.length;o++){var a=t.parts[o];e?(a.isStatic||(a._original={restitution:a.restitution,friction:a.friction,mass:a.mass,inertia:a.inertia,density:a.density,inverseMass:a.inverseMass,inverseInertia:a.inverseInertia}),a.restitution=0,a.friction=1,a.mass=a.inertia=a.density=1/0,a.inverseMass=a.inverseInertia=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.angularVelocity=0,a.speed=0,a.angularSpeed=0,a.motion=0):a._original&&(a.restitution=a._original.restitution,a.friction=a._original.friction,a.mass=a._original.mass,a.inertia=a._original.inertia,a.density=a._original.density,a.inverseMass=a._original.inverseMass,a.inverseInertia=a._original.inverseInertia,a._original=null),a.isStatic=e}},t.setMass=function(t,e){var o=t.inertia/(t.mass/6);t.inertia=o*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},t.setDensity=function(e,o){t.setMass(e,o*e.area),e.density=o},t.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},t.setVertices=function(e,o){o[0].body===e?e.vertices=o:e.vertices=global.Matter.Vertices.create(o,e),e.axes=global.Matter.Axes.fromVertices(e.vertices),e.area=global.Matter.Vertices.area(e.vertices),t.setMass(e,e.density*e.area);var a=global.Matter.Vertices.centre(e.vertices);global.Matter.Vertices.translate(e.vertices,a,-1),t.setInertia(e,t._inertiaScale*global.Matter.Vertices.inertia(e.vertices,e.mass)),global.Matter.Vertices.translate(e.vertices,e.position),global.Matter.Bounds.update(e.bounds,e.vertices,e.velocity)},t.setParts=function(e,o,a){var r;for(o=o.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<o.length;r++){var n=o[r];n!==e&&(n.parent=e,e.parts.push(n))}if(1!==e.parts.length){if(a=void 0===a||a){var i=[];for(r=0;r<o.length;r++)i=i.concat(o[r].vertices);global.Matter.Vertices.clockwiseSort(i);var l=global.Matter.Vertices.hull(i),s=global.Matter.Vertices.centre(l);t.setVertices(e,l),global.Matter.Vertices.translate(e.vertices,s)}var c=t._totalProperties(e);e.area=c.area,e.parent=e,e.position.x=c.centre.x,e.position.y=c.centre.y,e.positionPrev.x=c.centre.x,e.positionPrev.y=c.centre.y,t.setMass(e,c.mass),t.setInertia(e,c.inertia),t.setPosition(e,c.centre)}},t.setCentre=function(t,e,o){o?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},t.setPosition=function(t,e,o){var a=global.Matter.Vector.sub(e,t.position);o?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=a.x,t.velocity.y=a.y,t.speed=global.Matter.Vector.magnitude(a)):(t.positionPrev.x+=a.x,t.positionPrev.y+=a.y);for(var r=0;r<t.parts.length;r++){var n=t.parts[r];n.position.x+=a.x,n.position.y+=a.y,global.Matter.Vertices.translate(n.vertices,a),global.Matter.Bounds.update(n.bounds,n.vertices,t.velocity)}},t.setAngle=function(t,e,o){var a=e-t.angle;o?(t.anglePrev=t.angle,t.angularVelocity=a,t.angularSpeed=Math.abs(a)):t.anglePrev+=a;for(var r=0;r<t.parts.length;r++){var n=t.parts[r];n.angle+=a,global.Matter.Vertices.rotate(n.vertices,a,t.position),global.Matter.Axes.rotate(n.axes,a),global.Matter.Bounds.update(n.bounds,n.vertices,t.velocity),r>0&&global.Matter.Vector.rotateAbout(n.position,a,t.position,n.position)}},t.setVelocity=function(e,o){var a=e.deltaTime/t._baseDelta;e.positionPrev.x=e.position.x-o.x*a,e.positionPrev.y=e.position.y-o.y*a,e.velocity.x=(e.position.x-e.positionPrev.x)/a,e.velocity.y=(e.position.y-e.positionPrev.y)/a,e.speed=global.Matter.Vector.magnitude(e.velocity)},t.getVelocity=function(e){var o=t._baseDelta/e.deltaTime;return{x:(e.position.x-e.positionPrev.x)*o,y:(e.position.y-e.positionPrev.y)*o}},t.getSpeed=function(e){return global.Matter.Vector.magnitude(t.getVelocity(e))},t.setSpeed=function(e,o){t.setVelocity(e,global.Matter.Vector.mult(global.Matter.Vector.normalise(t.getVelocity(e)),o))},t.setAngularVelocity=function(e,o){var a=e.deltaTime/t._baseDelta;e.anglePrev=e.angle-o*a,e.angularVelocity=(e.angle-e.anglePrev)/a,e.angularSpeed=Math.abs(e.angularVelocity)},t.getAngularVelocity=function(e){return(e.angle-e.anglePrev)*t._baseDelta/e.deltaTime},t.getAngularSpeed=function(e){return Math.abs(t.getAngularVelocity(e))},t.setAngularSpeed=function(e,o){t.setAngularVelocity(e,global.Matter.Common.sign(t.getAngularVelocity(e))*o)},t.translate=function(e,o,a){t.setPosition(e,global.Matter.Vector.add(e.position,o),a)},t.rotate=function(e,o,a,r){if(a){var n=Math.cos(o),i=Math.sin(o),l=e.position.x-a.x,s=e.position.y-a.y;t.setPosition(e,{x:a.x+(l*n-s*i),y:a.y+(l*i+s*n)},r),t.setAngle(e,e.angle+o,r)}else t.setAngle(e,e.angle+o,r)},t.scale=function(e,o,a,r){var n=0,i=0;r=r||e.position;for(var l=0;l<e.parts.length;l++){var s=e.parts[l];global.Matter.Vertices.scale(s.vertices,o,a,r),s.axes=global.Matter.Axes.fromVertices(s.vertices),s.area=global.Matter.Vertices.area(s.vertices),t.setMass(s,e.density*s.area),global.Matter.Vertices.translate(s.vertices,{x:-s.position.x,y:-s.position.y}),t.setInertia(s,t._inertiaScale*global.Matter.Vertices.inertia(s.vertices,s.mass)),global.Matter.Vertices.translate(s.vertices,{x:s.position.x,y:s.position.y}),l>0&&(n+=s.area,i+=s.inertia),s.position.x=r.x+(s.position.x-r.x)*o,s.position.y=r.y+(s.position.y-r.y)*a,global.Matter.Bounds.update(s.bounds,s.vertices,e.velocity)}e.parts.length>1&&(e.area=n,e.isStatic||(t.setMass(e,e.density*n),t.setInertia(e,i))),e.circleRadius&&(o===a?e.circleRadius*=o:e.circleRadius=null)},t.update=function(e,o){var a=(o=(void 0!==o?o:1e3/60)*e.timeScale)*o,r=t._timeCorrection?o/(e.deltaTime||o):1,n=1-e.frictionAir*(o/global.Matter.Common._baseDelta),i=(e.position.x-e.positionPrev.x)*r,l=(e.position.y-e.positionPrev.y)*r;e.velocity.x=i*n+e.force.x/e.mass*a,e.velocity.y=l*n+e.force.y/e.mass*a,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.deltaTime=o,e.angularVelocity=(e.angle-e.anglePrev)*n*r+e.torque/e.inertia*a,e.anglePrev=e.angle,e.angle+=e.angularVelocity;for(var s=0;s<e.parts.length;s++){var c=e.parts[s];global.Matter.Vertices.translate(c.vertices,e.velocity),s>0&&(c.position.x+=e.velocity.x,c.position.y+=e.velocity.y),0!==e.angularVelocity&&(global.Matter.Vertices.rotate(c.vertices,e.angularVelocity,e.position),global.Matter.Axes.rotate(c.axes,e.angularVelocity),s>0&&global.Matter.Vector.rotateAbout(c.position,e.angularVelocity,e.position,c.position)),global.Matter.Bounds.update(c.bounds,c.vertices,e.velocity)}},t.updateVelocities=function(e){var o=t._baseDelta/e.deltaTime,a=e.velocity;a.x=(e.position.x-e.positionPrev.x)*o,a.y=(e.position.y-e.positionPrev.y)*o,e.speed=Math.sqrt(a.x*a.x+a.y*a.y),e.angularVelocity=(e.angle-e.anglePrev)*o,e.angularSpeed=Math.abs(e.angularVelocity)},t.applyForce=function(t,e,o){var a=e.x-t.position.x,r=e.y-t.position.y;t.force.x+=o.x,t.force.y+=o.y,t.torque+=a*o.y-r*o.x},t._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=1===t.parts.length?0:1;o<t.parts.length;o++){var a=t.parts[o],r=a.mass!==1/0?a.mass:1;e.mass+=r,e.area+=a.area,e.inertia+=a.inertia,e.centre=global.Matter.Vector.add(e.centre,global.Matter.Vector.mult(a.position,r))}return e.centre=global.Matter.Vector.div(e.centre,e.mass),e}}}},function(t,e,o){o(4);var a=o(6),r=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Sleeping){global.Matter||(global.Matter={}),global.Matter.Sleeping={};var t=global.Matter.Sleeping;a(),r(),t._motionWakeThreshold=.18,t._motionSleepThreshold=.08,t._minBias=.9,t.update=function(e,o){for(var a=o/global.Matter.Common._baseDelta,r=t._motionSleepThreshold,n=0;n<e.length;n++){var i=e[n],l=global.Matter.Body.getSpeed(i),s=global.Matter.Body.getAngularSpeed(i),c=l*l+s*s;if(0===i.force.x&&0===i.force.y){var g=Math.min(i.motion,c),u=Math.max(i.motion,c);i.motion=t._minBias*g+(1-t._minBias)*u,i.sleepThreshold>0&&i.motion<r?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold/a&&t.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}else t.set(i,!1)}},t.afterCollisions=function(e){for(var o=t._motionSleepThreshold,a=0;a<e.length;a++){var r=e[a];if(r.isActive){var n=r.collision,i=n.bodyA.parent,l=n.bodyB.parent;if(!(i.isSleeping&&l.isSleeping||i.isStatic||l.isStatic)&&(i.isSleeping||l.isSleeping)){var s=i.isSleeping&&!i.isStatic?i:l,c=s===i?l:i;!s.isStatic&&c.motion>o&&t.set(s,!1)}}}},t.set=function(t,e){var o=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,o||global.Matter.Events.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,o&&global.Matter.Events.trigger(t,"sleepEnd"))}}}},function(t,e,o){var a=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Events){global.Matter||(global.Matter={}),global.Matter.Events={};var t=global.Matter.Events;a(),t.on=function(t,e,o){for(var a,r=e.split(" "),n=0;n<r.length;n++)a=r[n],t.events=t.events||{},t.events[a]=t.events[a]||[],t.events[a].push(o);return o},t.off=function(t,e,o){if(e){"function"==typeof e&&(o=e,e=global.Matter.Common.keys(t.events).join(" "));for(var a=e.split(" "),r=0;r<a.length;r++){var n=t.events[a[r]],i=[];if(o&&n)for(var l=0;l<n.length;l++)n[l]!==o&&i.push(n[l]);t.events[a[r]]=i}}else t.events={}},t.trigger=function(t,e,o){var a,r,n,i,l=t.events;if(l&&global.Matter.Common.keys(l).length>0){o||(o={}),a=e.split(" ");for(var s=0;s<a.length;s++)if(n=l[r=a[s]]){(i=global.Matter.Common.clone(o,!1)).name=r,i.source=t;for(var c=0;c<n.length;c++)n[c].apply(t,[i])}}}}}},function(t,e,o){var a=o(6),r=o(0),n=o(3),i=o(4);t.exports=function(){if(!global.Matter||!global.Matter.Composite){global.Matter||(global.Matter={}),global.Matter.Composite={};var t=global.Matter.Composite;a(),r(),n(),i(),t.create=function(t){return global.Matter.Common.extend({id:global.Matter.Common.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},t)},t.setModified=function(e,o,a,r){if(e.isModified=o,o&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),a&&e.parent&&t.setModified(e.parent,o,a,r),r)for(var n=0;n<e.composites.length;n++){var i=e.composites[n];t.setModified(i,o,a,r)}},t.add=function(e,o){var a=[].concat(o);global.Matter.Events.trigger(e,"beforeAdd",{object:o});for(var r=0;r<a.length;r++){var n=a[r];switch(n.type){case"body":if(n.parent!==n){global.Matter.Common.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}t.addBody(e,n);break;case"constraint":t.addConstraint(e,n);break;case"composite":t.addComposite(e,n);break;case"mouseConstraint":t.addConstraint(e,n.constraint)}}return global.Matter.Events.trigger(e,"afterAdd",{object:o}),e},t.remove=function(e,o,a){var r=[].concat(o);global.Matter.Events.trigger(e,"beforeRemove",{object:o});for(var n=0;n<r.length;n++){var i=r[n];switch(i.type){case"body":t.removeBody(e,i,a);break;case"constraint":t.removeConstraint(e,i,a);break;case"composite":t.removeComposite(e,i,a);break;case"mouseConstraint":t.removeConstraint(e,i.constraint)}}return global.Matter.Events.trigger(e,"afterRemove",{object:o}),e},t.addComposite=function(e,o){return e.composites.push(o),o.parent=e,t.setModified(e,!0,!0,!1),e},t.removeComposite=function(e,o,a){var r=global.Matter.Common.indexOf(e.composites,o);if(-1!==r){var n=t.allBodies(o);t.removeCompositeAt(e,r);for(var i=0;i<n.length;i++)n[i].sleepCounter=0}if(a)for(i=0;i<e.composites.length;i++)t.removeComposite(e.composites[i],o,!0);return e},t.removeCompositeAt=function(e,o){return e.composites.splice(o,1),t.setModified(e,!0,!0,!1),e},t.addBody=function(e,o){return e.bodies.push(o),t.setModified(e,!0,!0,!1),e},t.removeBody=function(e,o,a){var r=global.Matter.Common.indexOf(e.bodies,o);if(-1!==r&&(t.removeBodyAt(e,r),o.sleepCounter=0),a)for(var n=0;n<e.composites.length;n++)t.removeBody(e.composites[n],o,!0);return e},t.removeBodyAt=function(e,o){return e.bodies.splice(o,1),t.setModified(e,!0,!0,!1),e},t.addConstraint=function(e,o){return e.constraints.push(o),t.setModified(e,!0,!0,!1),e},t.removeConstraint=function(e,o,a){var r=global.Matter.Common.indexOf(e.constraints,o);if(-1!==r&&t.removeConstraintAt(e,r),a)for(var n=0;n<e.composites.length;n++)t.removeConstraint(e.composites[n],o,!0);return e},t.removeConstraintAt=function(e,o){return e.constraints.splice(o,1),t.setModified(e,!0,!0,!1),e},t.clear=function(e,o,a){if(a)for(var r=0;r<e.composites.length;r++)t.clear(e.composites[r],o,!0);return o?e.bodies=e.bodies.filter((function(t){return t.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,t.setModified(e,!0,!0,!1),e},t.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var o=[].concat(e.bodies),a=0;a<e.composites.length;a++)o=o.concat(t.allBodies(e.composites[a]));return e.cache&&(e.cache.allBodies=o),o},t.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var o=[].concat(e.constraints),a=0;a<e.composites.length;a++)o=o.concat(t.allConstraints(e.composites[a]));return e.cache&&(e.cache.allConstraints=o),o},t.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var o=[].concat(e.composites),a=0;a<e.composites.length;a++)o=o.concat(t.allComposites(e.composites[a]));return e.cache&&(e.cache.allComposites=o),o},t.get=function(e,o,a){var r,n;switch(a){case"body":r=t.allBodies(e);break;case"constraint":r=t.allConstraints(e);break;case"composite":r=t.allComposites(e).concat(e)}return r?0===(n=r.filter((function(t){return t.id.toString()===o.toString()}))).length?null:n[0]:null},t.move=function(e,o,a){return t.remove(e,o),t.add(a,o),e},t.rebase=function(e){for(var o=t.allBodies(e).concat(t.allConstraints(e)).concat(t.allComposites(e)),a=0;a<o.length;a++)o[a].id=global.Matter.Common.nextId();return e},t.translate=function(e,o,a){for(var r=a?t.allBodies(e):e.bodies,n=0;n<r.length;n++)global.Matter.Body.translate(r[n],o);return e},t.rotate=function(e,o,a,r){for(var n=Math.cos(o),i=Math.sin(o),l=r?t.allBodies(e):e.bodies,s=0;s<l.length;s++){var c=l[s],g=c.position.x-a.x,u=c.position.y-a.y;global.Matter.Body.setPosition(c,{x:a.x+(g*n-u*i),y:a.y+(g*i+u*n)}),global.Matter.Body.rotate(c,o)}return e},t.scale=function(e,o,a,r,n){for(var i=n?t.allBodies(e):e.bodies,l=0;l<i.length;l++){var s=i[l],c=s.position.x-r.x,g=s.position.y-r.y;global.Matter.Body.setPosition(s,{x:r.x+c*o,y:r.y+g*a}),global.Matter.Body.scale(s,o,a)}return e},t.bounds=function(e){for(var o=t.allBodies(e),a=[],r=0;r<o.length;r+=1){var n=o[r];a.push(n.bounds.min,n.bounds.max)}return global.Matter.Bounds.create(a)}}}},function(t,e,o){var a=o(1),r=o(0);t.exports=function(){global.Matter&&global.Matter.Axes||(global.Matter||(global.Matter={}),global.Matter.Axes={},a(),r(),global.Matter.Axes.fromVertices=function(t){for(var e={},o=0;o<t.length;o++){var n=(o+1)%t.length,i=a.normalise({x:t[n].y-t[o].y,y:t[o].x-t[n].x}),l=0===i.y?1/0:i.x/i.y;e[l=l.toFixed(3).toString()]=i}return r.values(e)},global.Matter.Axes.rotate=function(t,e){if(0!==e)for(var o=Math.cos(e),a=Math.sin(e),r=0;r<t.length;r++){var n,i=t[r];n=i.x*o-i.y*a,i.y=i.x*a+i.y*o,i.x=n}})}},function(t,e,o){var a=o(2),r=o(0),n=o(4),i=o(3),l=o(1);t.exports=function(){if(!global.Matter||!global.Matter.Bodies){global.Matter||(global.Matter={}),global.Matter.Bodies={};var t=global.Matter.Bodies;a(),r(),n(),i(),l(),t.rectangle=function(t,e,o,a,r){r=r||{};var n={label:"Rectangle Body",position:{x:t,y:e},vertices:global.Matter.Vertices.fromPath("L 0 0 L "+o+" 0 L "+o+" "+a+" L 0 "+a)};if(r.chamfer){var i=r.chamfer;n.vertices=global.Matter.Vertices.chamfer(n.vertices,i.radius,i.quality,i.qualityMin,i.qualityMax),delete r.chamfer}return global.Matter.Body.create(global.Matter.Common.extend({},n,r))},t.trapezoid=function(t,e,o,a,r,n){n=n||{},r>=1&&global.Matter.Common.warn("Bodies.trapezoid: slope parameter must be < 1.");var i,l=o*(r*=.5),s=l+(1-2*r)*o,c=s+l;i=r<.5?"L 0 0 L "+l+" "+-a+" L "+s+" "+-a+" L "+c+" 0":"L 0 0 L "+s+" "+-a+" L "+c+" 0";var g={label:"Trapezoid Body",position:{x:t,y:e},vertices:global.Matter.Vertices.fromPath(i)};if(n.chamfer){var u=n.chamfer;g.vertices=global.Matter.Vertices.chamfer(g.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete n.chamfer}return global.Matter.Body.create(global.Matter.Common.extend({},g,n))},t.circle=function(e,o,a,r,n){r=r||{};var i={label:"Circle Body",circleRadius:a};n=n||25;var l=Math.ceil(Math.max(10,Math.min(n,a)));return l%2==1&&(l+=1),t.polygon(e,o,l,a,global.Matter.Common.extend({},i,r))},t.polygon=function(e,o,a,r,n){if(n=n||{},a<3)return t.circle(e,o,r,n);for(var i=2*Math.PI/a,l="",s=.5*i,c=0;c<a;c+=1){var g=s+c*i,u=Math.cos(g)*r,p=Math.sin(g)*r;l+="L "+u.toFixed(3)+" "+p.toFixed(3)+" "}var d={label:"Polygon Body",position:{x:e,y:o},vertices:global.Matter.Vertices.fromPath(l)};if(n.chamfer){var b=n.chamfer;d.vertices=global.Matter.Vertices.chamfer(d.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete n.chamfer}return global.Matter.Body.create(global.Matter.Common.extend({},d,n))},t.fromVertices=function(t,e,o,a,r,n,i,l){var s,c,g,u,p,d,b,f,v,m,y=global.Matter.Common.getDecomp();for(s=Boolean(y&&y.quickDecomp),a=a||{},g=[],r=void 0!==r&&r,n=void 0!==n?n:.01,i=void 0!==i?i:10,l=void 0!==l?l:.01,global.Matter.Common.isArray(o[0])||(o=[o]),v=0;v<o.length;v+=1)if(p=o[v],!(u=global.Matter.Vertices.isConvex(p))&&!s&&global.Matter.Common.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),u||!s)p=u?global.Matter.Vertices.clockwiseSort(p):global.Matter.Vertices.hull(p),g.push({position:{x:t,y:e},vertices:p});else{var M=p.map((function(t){return[t.x,t.y]}));y.makeCCW(M),!1!==n&&y.removeCollinearPoints(M,n),!1!==l&&y.removeDuplicatePoints&&y.removeDuplicatePoints(M,l);var x=y.quickDecomp(M);for(d=0;d<x.length;d++){var h=x[d].map((function(t){return{x:t[0],y:t[1]}}));i>0&&global.Matter.Vertices.area(h)<i||g.push({position:global.Matter.Vertices.centre(h),vertices:h})}}for(d=0;d<g.length;d++)g[d]=global.Matter.Body.create(global.Matter.Common.extend(g[d],a));if(r){for(d=0;d<g.length;d++){var C=g[d];for(b=d+1;b<g.length;b++){var S=g[b];if(global.Matter.Bounds.overlaps(C.bounds,S.bounds)){var B=C.vertices,V=S.vertices;for(f=0;f<C.vertices.length;f++)for(m=0;m<S.vertices.length;m++){var A=global.Matter.Vector.magnitudeSquared(global.Matter.Vector.sub(B[(f+1)%B.length],V[m])),P=global.Matter.Vector.magnitudeSquared(global.Matter.Vector.sub(B[f],V[(m+1)%V.length]));A<5&&P<5&&(B[f].isInternal=!0,V[m].isInternal=!0)}}}}}return g.length>1?(c=global.Matter.Body.create(global.Matter.Common.extend({parts:g.slice(0)},a)),global.Matter.Body.setPosition(c,{x:t,y:e}),c):g[0]}}}},function(t,e,o){var a=o(2),r=o(11);t.exports=function(){if(!global.Matter||!global.Matter.Collision){global.Matter||(global.Matter={}),global.Matter.Collision={};var t=global.Matter.Collision;a(),r();var e=[],o={overlap:0,axis:null},n={overlap:0,axis:null};t.create=function(t,e){return{pair:null,collided:!1,bodyA:t,bodyB:e,parentA:t.parent,parentB:e.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},t.collides=function(e,a,r){if(t._overlapAxes(o,e.vertices,a.vertices,e.axes),o.overlap<=0)return null;if(t._overlapAxes(n,a.vertices,e.vertices,a.axes),n.overlap<=0)return null;var i,l,s=r&&r.table[global.Matter.Pair.id(e,a)];s?i=s.collision:((i=t.create(e,a)).collided=!0,i.bodyA=e.id<a.id?e:a,i.bodyB=e.id<a.id?a:e,i.parentA=i.bodyA.parent,i.parentB=i.bodyB.parent),e=i.bodyA,a=i.bodyB,l=o.overlap<n.overlap?o:n;var c=i.normal,g=i.tangent,u=i.penetration,p=i.supports,d=l.overlap,b=l.axis,f=b.x,v=b.y;f*(a.position.x-e.position.x)+v*(a.position.y-e.position.y)>=0&&(f=-f,v=-v),c.x=f,c.y=v,g.x=-v,g.y=f,u.x=f*d,u.y=v*d,i.depth=d;var m=t._findSupports(e,a,c,1),y=0;if(global.Matter.Vertices.contains(e.vertices,m[0])&&(p[y++]=m[0]),global.Matter.Vertices.contains(e.vertices,m[1])&&(p[y++]=m[1]),y<2){var M=t._findSupports(a,e,c,-1);global.Matter.Vertices.contains(a.vertices,M[0])&&(p[y++]=M[0]),y<2&&global.Matter.Vertices.contains(a.vertices,M[1])&&(p[y++]=M[1])}return 0===y&&(p[y++]=m[0]),i.supportCount=y,i},t._overlapAxes=function(t,e,o,a){var r,n,i,l,s,c,g=e.length,u=o.length,p=e[0].x,d=e[0].y,b=o[0].x,f=o[0].y,v=a.length,m=Number.MAX_VALUE,y=0;for(s=0;s<v;s++){var M=a[s],x=M.x,h=M.y,C=p*x+d*h,S=b*x+f*h,B=C,V=S;for(c=1;c<g;c+=1)(l=e[c].x*x+e[c].y*h)>B?B=l:l<C&&(C=l);for(c=1;c<u;c+=1)(l=o[c].x*x+o[c].y*h)>V?V=l:l<S&&(S=l);if((r=(n=B-S)<(i=V-C)?n:i)<m&&(m=r,y=s,r<=0))break}t.axis=a[y],t.overlap=m},t._findSupports=function(t,o,a,r){var n,i,l,s=o.vertices,c=s.length,g=t.position.x,u=t.position.y,p=a.x*r,d=a.y*r,b=s[0],f=b,v=p*(g-f.x)+d*(u-f.y);for(l=1;l<c;l+=1)(i=p*(g-(f=s[l]).x)+d*(u-f.y))<v&&(v=i,b=f);return v=p*(g-(n=s[(c+b.index-1)%c]).x)+d*(u-n.y),p*(g-(f=s[(b.index+1)%c]).x)+d*(u-f.y)<v?(e[0]=b,e[1]=f,e):(e[0]=b,e[1]=n,e)}}}},function(t,e,o){var a=o(14);t.exports=function(){if(!global.Matter||!global.Matter.Pair){global.Matter||(global.Matter={}),global.Matter.Pair={};var t=global.Matter.Pair;a(),t.create=function(e,o){var a=e.bodyA,r=e.bodyB,n={id:t.id(a,r),bodyA:a,bodyB:r,collision:e,contacts:[global.Matter.Contact.create(),global.Matter.Contact.create()],contactCount:0,separation:0,isActive:!0,isSensor:a.isSensor||r.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(n,e,o),n},t.update=function(t,e,o){var a=e.supports,r=e.supportCount,n=t.contacts,i=e.parentA,l=e.parentB;t.isActive=!0,t.timeUpdated=o,t.collision=e,t.separation=e.depth,t.inverseMass=i.inverseMass+l.inverseMass,t.friction=i.friction<l.friction?i.friction:l.friction,t.frictionStatic=i.frictionStatic>l.frictionStatic?i.frictionStatic:l.frictionStatic,t.restitution=i.restitution>l.restitution?i.restitution:l.restitution,t.slop=i.slop>l.slop?i.slop:l.slop,t.contactCount=r,e.pair=t;var s=a[0],c=n[0],g=a[1],u=n[1];u.vertex!==s&&c.vertex!==g||(n[1]=c,n[0]=c=u,u=n[1]),c.vertex=s,u.vertex=g},t.setActive=function(t,e,o){e?(t.isActive=!0,t.timeUpdated=o):(t.isActive=!1,t.contactCount=0)},t.id=function(t,e){return t.id<e.id?t.id.toString(36)+":"+e.id.toString(36):e.id.toString(36)+":"+t.id.toString(36)}}}},function(t,e,o){var a=o(2),r=o(1),n=o(5),i=o(3),l=o(8),s=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Constraint){global.Matter||(global.Matter={}),global.Matter.Constraint={};var t=global.Matter.Constraint;a(),r(),n(),i(),l(),s(),t._warming=.4,t._torqueDampen=1,t._minLength=1e-6,t.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var o=e.bodyA?global.Matter.Vector.add(e.bodyA.position,e.pointA):e.pointA,a=e.bodyB?global.Matter.Vector.add(e.bodyB.position,e.pointB):e.pointB,r=global.Matter.Vector.magnitude(global.Matter.Vector.sub(o,a));e.length=void 0!==e.length?e.length:r,e.id=e.id||global.Matter.Common.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var n={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&e.stiffness>.1?(n.type="pin",n.anchors=!1):e.stiffness<.9&&(n.type="spring"),e.render=global.Matter.Common.extend(n,e.render),e},t.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var o=t[e],a=o.constraintImpulse;o.isStatic||0===a.x&&0===a.y&&0===a.angle||(o.position.x+=a.x,o.position.y+=a.y,o.angle+=a.angle)}},t.solveAll=function(e,o){for(var a=global.Matter.Common.clamp(o/global.Matter.Common._baseDelta,0,1),r=0;r<e.length;r+=1){var n=e[r],i=!n.bodyA||n.bodyA&&n.bodyA.isStatic,l=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(i||l)&&t.solve(e[r],a)}for(r=0;r<e.length;r+=1)i=!(n=e[r]).bodyA||n.bodyA&&n.bodyA.isStatic,l=!n.bodyB||n.bodyB&&n.bodyB.isStatic,i||l||t.solve(e[r],a)},t.solve=function(e,o){var a=e.bodyA,r=e.bodyB,n=e.pointA,i=e.pointB;if(a||r){a&&!a.isStatic&&(global.Matter.Vector.rotate(n,a.angle-e.angleA,n),e.angleA=a.angle),r&&!r.isStatic&&(global.Matter.Vector.rotate(i,r.angle-e.angleB,i),e.angleB=r.angle);var l=n,s=i;if(a&&(l=global.Matter.Vector.add(a.position,n)),r&&(s=global.Matter.Vector.add(r.position,i)),l&&s){var c=global.Matter.Vector.sub(l,s),g=global.Matter.Vector.magnitude(c);g<t._minLength&&(g=t._minLength);var u,p,d,b,f,v=(g-e.length)/g,m=e.stiffness>=1||0===e.length?e.stiffness*o:e.stiffness*o*o,y=e.damping*o,M=global.Matter.Vector.mult(c,v*m),x=(a?a.inverseMass:0)+(r?r.inverseMass:0),h=x+((a?a.inverseInertia:0)+(r?r.inverseInertia:0));if(y>0){var C=global.Matter.Vector.create();d=global.Matter.Vector.div(c,g),f=global.Matter.Vector.sub(r&&global.Matter.Vector.sub(r.position,r.positionPrev)||C,a&&global.Matter.Vector.sub(a.position,a.positionPrev)||C),b=global.Matter.Vector.dot(d,f)}a&&!a.isStatic&&(p=a.inverseMass/x,a.constraintImpulse.x-=M.x*p,a.constraintImpulse.y-=M.y*p,a.position.x-=M.x*p,a.position.y-=M.y*p,y>0&&(a.positionPrev.x-=y*d.x*b*p,a.positionPrev.y-=y*d.y*b*p),u=global.Matter.Vector.cross(n,M)/h*t._torqueDampen*a.inverseInertia*(1-e.angularStiffness),a.constraintImpulse.angle-=u,a.angle-=u),r&&!r.isStatic&&(p=r.inverseMass/x,r.constraintImpulse.x+=M.x*p,r.constraintImpulse.y+=M.y*p,r.position.x+=M.x*p,r.position.y+=M.y*p,y>0&&(r.positionPrev.x+=y*d.x*b*p,r.positionPrev.y+=y*d.y*b*p),u=global.Matter.Vector.cross(i,M)/h*t._torqueDampen*r.inverseInertia*(1-e.angularStiffness),r.constraintImpulse.angle+=u,r.angle+=u)}}},t.postSolveAll=function(e){for(var o=0;o<e.length;o++){var a=e[o],r=a.constraintImpulse;if(!(a.isStatic||0===r.x&&0===r.y&&0===r.angle)){global.Matter.Sleeping.set(a,!1);for(var n=0;n<a.parts.length;n++){var i=a.parts[n];global.Matter.Vertices.translate(i.vertices,r),n>0&&(i.position.x+=r.x,i.position.y+=r.y),0!==r.angle&&(global.Matter.Vertices.rotate(i.vertices,r.angle,a.position),global.Matter.Axes.rotate(i.axes,r.angle),n>0&&global.Matter.Vector.rotateAbout(i.position,r.angle,a.position,i.position)),global.Matter.Bounds.update(i.bounds,i.vertices,a.velocity)}r.angle*=t._warming,r.x*=t._warming,r.y*=t._warming}}},t.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),y:(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0)}},t.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0),y:(t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0)}},t.currentLength=function(t){var e=(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),o=(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0),a=e-((t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0)),r=o-((t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0));return Math.sqrt(a*a+r*r)}}}},function(t,e,o){var a=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Plugin){global.Matter||(global.Matter={}),global.Matter.Plugin={},a();var t=global.Matter.Plugin;t._registry={},t.register=function(e){if(t.isPlugin(e)||global.Matter.Common.warn("Plugin.register:",t.toString(e),"does not implement all required fields."),e.name in t._registry){var o=t._registry[e.name],a=t.versionParse(e.version).number,r=t.versionParse(o.version).number;a>r?(global.Matter.Common.warn("Plugin.register:",t.toString(o),"was upgraded to",t.toString(e)),t._registry[e.name]=e):a<r?global.Matter.Common.warn("Plugin.register:",t.toString(o),"cannot be downgraded to",t.toString(e)):e!==o&&global.Matter.Common.warn("Plugin.register:",t.toString(e),"is already registered to a different plugin object")}else t._registry[e.name]=e;return e},t.resolve=function(e){return t._registry[t.dependencyParse(e).name]},t.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},t.isPlugin=function(t){return t&&t.name&&t.version&&t.install},t.isUsed=function(t,e){return t.used.indexOf(e)>-1},t.isFor=function(e,o){var a=e.for&&t.dependencyParse(e.for);return!e.for||o.name===a.name&&t.versionSatisfies(o.version,a.range)},t.use=function(e,o){if(e.uses=(e.uses||[]).concat(o||[]),0!==e.uses.length){for(var a=t.dependencies(e),r=global.Matter.Common.topologicalSort(a),n=[],i=0;i<r.length;i++)if(r[i]!==e.name){var l=t.resolve(r[i]);l?t.isUsed(e,l.name)||(t.isFor(l,e)||(global.Matter.Common.warn("Plugin.use:",t.toString(l),"is for",l.for,"but installed on",t.toString(e)+"."),l._warned=!0),l.install?l.install(e):(global.Matter.Common.warn("Plugin.use:",t.toString(l),"does not specify an install function."),l._warned=!0),n.push(l._warned?"ðŸ”¶ "+t.toString(l):"âœ… "+t.toString(l)),delete l._warned,e.used.push(l.name)):n.push("âŒ "+r[i])}n.length>0&&global.Matter.Common.info(n.join("  "))}else global.Matter.Common.warn("Plugin.use:",t.toString(e),"does not specify any dependencies to install.")},t.dependencies=function(e,o){var a=t.dependencyParse(e),r=a.name;if(!(o=o||{})[r]){e=t.resolve(e)||e,o[r]=global.Matter.Common.map(e.uses||[],(function(o){t.isPlugin(o)&&t.register(o);var r=t.dependencyParse(o),n=t.resolve(o);return n&&!t.versionSatisfies(n.version,r.range)?(global.Matter.Common.warn("Plugin.dependencies:",t.toString(n),"does not satisfy",t.toString(r),"used by",t.toString(a)+"."),n._warned=!0,e._warned=!0):n||(global.Matter.Common.warn("Plugin.dependencies:",t.toString(o),"used by",t.toString(a),"could not be resolved."),e._warned=!0),r.name}));for(var n=0;n<o[r].length;n+=1)t.dependencies(o[r][n],o);return o}},t.dependencyParse=function(t){if(global.Matter.Common.isString(t)){return/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(t)||global.Matter.Common.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}}return{name:t.name,range:t.range||t.version}}}}},function(t,e){t.exports=function(){global.Matter&&global.Matter.Contact||(global.Matter||(global.Matter={}),global.Matter.Contact={},global.Matter.Contact.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}})}},function(t,e,o){var a=o(0),r=o(10);t.exports=function(){if(!global.Matter||!global.Matter.Detector){global.Matter||(global.Matter={}),global.Matter.Detector={};var t=global.Matter.Detector;a(),r(),t.create=function(t){return global.Matter.Common.extend({bodies:[],collisions:[],pairs:null},t)},t.setBodies=function(t,e){t.bodies=e.slice(0)},t.clear=function(t){t.bodies=[],t.collisions=[]},t.collisions=function(e){var o,a,r=e.pairs,n=e.bodies,i=n.length,l=t.canCollide,s=global.Matter.Collision.collides,c=e.collisions,g=0;for(n.sort(t._compareBoundsX),o=0;o<i;o++){var u=n[o],p=u.bounds,d=u.bounds.max.x,b=u.bounds.max.y,f=u.bounds.min.y,v=u.isStatic||u.isSleeping,m=u.parts.length,y=1===m;for(a=o+1;a<i;a++){var M=n[a];if((P=M.bounds).min.x>d)break;if(!(b<P.min.y||f>P.max.y)&&((!v||!M.isStatic&&!M.isSleeping)&&l(u.collisionFilter,M.collisionFilter))){var x=M.parts.length;if(y&&1===x)(V=s(u,M,r))&&(c[g++]=V);else for(var h=x>1?1:0,C=m>1?1:0;C<m;C++)for(var S=u.parts[C],B=(p=S.bounds,h);B<x;B++){var V,A=M.parts[B],P=A.bounds;if(!(p.min.x>P.max.x||p.max.x<P.min.x||p.max.y<P.min.y||p.min.y>P.max.y))(V=s(S,A,r))&&(c[g++]=V)}}}}return c.length!==g&&(c.length=g),c},t.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)},t._compareBoundsX=function(t,e){return t.bounds.min.x-e.bounds.min.x}}}},function(t,e,o){var a=o(2),r=o(0),n=o(3);t.exports=function(){if(!global.Matter||!global.Matter.Resolver){global.Matter||(global.Matter={}),global.Matter.Resolver={};var t=global.Matter.Resolver;a(),r(),n(),t._restingThresh=2,t._restingThreshTangent=Math.sqrt(6),t._positionDampen=.9,t._positionWarming=.8,t._frictionNormalMultiplier=5,t._frictionMaxStatic=Number.MAX_VALUE,t.preSolvePosition=function(t){var e,o,a,r=t.length;for(e=0;e<r;e++)(o=t[e]).isActive&&(a=o.contactCount,o.collision.parentA.totalContacts+=a,o.collision.parentB.totalContacts+=a)},t.solvePosition=function(e,o,a){var r,n,i,l,s,c,g,u,p=t._positionDampen*(a||1),d=global.Matter.Common.clamp(o/global.Matter.Common._baseDelta,0,1),b=e.length;for(r=0;r<b;r++)(n=e[r]).isActive&&!n.isSensor&&(l=(i=n.collision).parentA,s=i.parentB,c=i.normal,n.separation=i.depth+c.x*(s.positionImpulse.x-l.positionImpulse.x)+c.y*(s.positionImpulse.y-l.positionImpulse.y));for(r=0;r<b;r++)(n=e[r]).isActive&&!n.isSensor&&(l=(i=n.collision).parentA,s=i.parentB,c=i.normal,u=n.separation-n.slop*d,(l.isStatic||s.isStatic)&&(u*=2),l.isStatic||l.isSleeping||(g=p/l.totalContacts,l.positionImpulse.x+=c.x*u*g,l.positionImpulse.y+=c.y*u*g),s.isStatic||s.isSleeping||(g=p/s.totalContacts,s.positionImpulse.x-=c.x*u*g,s.positionImpulse.y-=c.y*u*g))},t.postSolvePosition=function(e){for(var o=t._positionWarming,a=e.length,r=global.Matter.Vertices.translate,n=global.Matter.Bounds.update,i=0;i<a;i++){var l=e[i],s=l.positionImpulse,c=s.x,g=s.y,u=l.velocity;if(l.totalContacts=0,0!==c||0!==g){for(var p=0;p<l.parts.length;p++){var d=l.parts[p];r(d.vertices,s),n(d.bounds,d.vertices,u),d.position.x+=c,d.position.y+=g}l.positionPrev.x+=c,l.positionPrev.y+=g,c*u.x+g*u.y<0?(s.x=0,s.y=0):(s.x*=o,s.y*=o)}}},t.preSolveVelocity=function(t){var e,o,a=t.length;for(e=0;e<a;e++){var r=t[e];if(r.isActive&&!r.isSensor){var n=r.contacts,i=r.contactCount,l=r.collision,s=l.parentA,c=l.parentB,g=l.normal,u=l.tangent;for(o=0;o<i;o++){var p=n[o],d=p.vertex,b=p.normalImpulse,f=p.tangentImpulse;if(0!==b||0!==f){var v=g.x*b+u.x*f,m=g.y*b+u.y*f;s.isStatic||s.isSleeping||(s.positionPrev.x+=v*s.inverseMass,s.positionPrev.y+=m*s.inverseMass,s.anglePrev+=s.inverseInertia*((d.x-s.position.x)*m-(d.y-s.position.y)*v)),c.isStatic||c.isSleeping||(c.positionPrev.x-=v*c.inverseMass,c.positionPrev.y-=m*c.inverseMass,c.anglePrev-=c.inverseInertia*((d.x-c.position.x)*m-(d.y-c.position.y)*v))}}}}},t.solveVelocity=function(e,o){var a,r,n,i,l=o/global.Matter.Common._baseDelta,s=l*l*l,c=-t._restingThresh*l,g=t._restingThreshTangent,u=t._frictionNormalMultiplier*l,p=t._frictionMaxStatic,d=e.length;for(n=0;n<d;n++){var b=e[n];if(b.isActive&&!b.isSensor){var f=b.collision,v=f.parentA,m=f.parentB,y=f.normal.x,M=f.normal.y,x=f.tangent.x,h=f.tangent.y,C=b.inverseMass,S=b.friction*b.frictionStatic*u,B=b.contacts,V=b.contactCount,A=1/V,P=v.position.x-v.positionPrev.x,_=v.position.y-v.positionPrev.y,I=v.angle-v.anglePrev,w=m.position.x-m.positionPrev.x,k=m.position.y-m.positionPrev.y,O=m.angle-m.anglePrev;for(i=0;i<V;i++){var D=B[i],j=D.vertex,E=j.x-v.position.x,L=j.y-v.position.y,q=j.x-m.position.x,T=j.y-m.position.y,F=P-L*I-(w-T*O),U=_+E*I-(k+q*O),W=y*F+M*U,R=x*F+h*U,N=b.separation+W,G=Math.min(N,1),z=(G=N<0?0:G)*S;R<-z||R>z?(r=R>0?R:-R,(a=b.friction*(R>0?1:-1)*s)<-r?a=-r:a>r&&(a=r)):(a=R,r=p);var X=E*M-L*y,Q=q*M-T*y,Z=A/(C+v.inverseInertia*X*X+m.inverseInertia*Q*Q),$=(1+b.restitution)*W*Z;if(a*=Z,W<c)D.normalImpulse=0;else{var H=D.normalImpulse;D.normalImpulse+=$,D.normalImpulse>0&&(D.normalImpulse=0),$=D.normalImpulse-H}if(R<-g||R>g)D.tangentImpulse=0;else{var J=D.tangentImpulse;D.tangentImpulse+=a,D.tangentImpulse<-r&&(D.tangentImpulse=-r),D.tangentImpulse>r&&(D.tangentImpulse=r),a=D.tangentImpulse-J}var K=y*$+x*a,Y=M*$+h*a;v.isStatic||v.isSleeping||(v.positionPrev.x+=K*v.inverseMass,v.positionPrev.y+=Y*v.inverseMass,v.anglePrev+=(E*Y-L*K)*v.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=K*m.inverseMass,m.positionPrev.y-=Y*m.inverseMass,m.anglePrev-=(q*Y-T*K)*m.inverseInertia)}}}}}}},function(t,e,o){var a=o(11),r=o(0);t.exports=function(){if(!global.Matter||!global.Matter.Pairs){global.Matter||(global.Matter={}),global.Matter.Pairs={};var t=global.Matter.Pairs;a(),r(),t.create=function(t){return global.Matter.Common.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},t.update=function(t,e,o){var a,r,n,i=global.Matter.Pair.update,l=global.Matter.Pair.create,s=global.Matter.Pair.setActive,c=t.table,g=t.list,u=g.length,p=u,d=t.collisionStart,b=t.collisionEnd,f=t.collisionActive,v=e.length,m=0,y=0,M=0;for(n=0;n<v;n++)(r=(a=e[n]).pair)?(r.isActive&&(f[M++]=r),i(r,a,o)):(c[(r=l(a,o)).id]=r,d[m++]=r,g[p++]=r);for(p=0,u=g.length,n=0;n<u;n++)(r=g[n]).timeUpdated>=o?g[p++]=r:(s(r,!1,o),r.collision.bodyA.sleepCounter>0&&r.collision.bodyB.sleepCounter>0?g[p++]=r:(b[y++]=r,delete c[r.id]));g.length!==p&&(g.length=p),d.length!==m&&(d.length=m),b.length!==y&&(b.length=y),f.length!==M&&(f.length=M)},t.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}}}},function(t,e,o){var a=o(19),r=o(8),n=o(9),i=o(4),l=o(3),s=o(10),c=o(0),g=o(7),u=o(20),p=o(12),d=o(14),b=o(15),f=o(21),v=o(6),m=o(11),y=o(17),M=o(13),x=o(22),h=o(16),C=o(5),S=o(1),B=o(2),V=o(23);t.exports=function(){a(),r(),n(),i(),l(),s(),c(),g(),u(),p(),d(),b(),f(),v(),m(),y(),M(),x(),h(),C(),S(),B(),V()}},function(t,e,o){var a=o(13),r=o(0);t.exports=function(){global.Matter||(global.Matter={},a(),r(),global.Matter.name="matter-js",global.Matter.version="0.20.0",global.Matter.uses=[],global.Matter.used=[],global.Matter.use=function(){global.Matter.Plugin.use(global.Matter,Array.prototype.slice.call(arguments))},global.Matter.before=function(t,e){return t=t.replace(/^Matter./,""),global.Matter.Common.chainPathBefore(global.Matter,t,e)},global.Matter.after=function(t,e){return t=t.replace(/^Matter./,""),global.Matter.Common.chainPathAfter(global.Matter,t,e)})}},function(t,e,o){var a=o(7),r=o(12),n=o(0),i=o(4),l=o(9);t.exports=function(){if(!global.Matter||!global.Matter.Composites){global.Matter||(global.Matter={}),global.Matter.Composites={};var t=global.Matter.Composites;a(),r(),n(),i(),l();var e=global.Matter.Common.deprecated;t.stack=function(t,e,o,a,r,n,i){for(var l,s=global.Matter.Composite.create({label:"Stack"}),c=t,g=e,u=0,p=0;p<a;p++){for(var d=0,b=0;b<o;b++){var f=i(c,g,b,p,l,u);if(f){var v=f.bounds.max.y-f.bounds.min.y,m=f.bounds.max.x-f.bounds.min.x;v>d&&(d=v),global.Matter.Body.translate(f,{x:.5*m,y:.5*v}),c=f.bounds.max.x+r,global.Matter.Composite.addBody(s,f),l=f,u+=1}else c+=r}g+=d+n,c=t}return s},t.chain=function(t,e,o,a,r,n){for(var i=t.bodies,l=1;l<i.length;l++){var s=i[l-1],c=i[l],g=s.bounds.max.y-s.bounds.min.y,u=s.bounds.max.x-s.bounds.min.x,p=c.bounds.max.y-c.bounds.min.y,d={bodyA:s,pointA:{x:u*e,y:g*o},bodyB:c,pointB:{x:(c.bounds.max.x-c.bounds.min.x)*a,y:p*r}},b=global.Matter.Common.extend(d,n);global.Matter.Composite.addConstraint(t,global.Matter.Constraint.create(b))}return t.label+=" Chain",t},t.mesh=function(t,e,o,a,r){var n,i,l,s,c,g=t.bodies;for(n=0;n<o;n++){for(i=1;i<e;i++)l=g[i-1+n*e],s=g[i+n*e],global.Matter.Composite.addConstraint(t,global.Matter.Constraint.create(global.Matter.Common.extend({bodyA:l,bodyB:s},r)));if(n>0)for(i=0;i<e;i++)l=g[i+(n-1)*e],s=g[i+n*e],global.Matter.Composite.addConstraint(t,global.Matter.Constraint.create(global.Matter.Common.extend({bodyA:l,bodyB:s},r))),a&&i>0&&(c=g[i-1+(n-1)*e],global.Matter.Composite.addConstraint(t,global.Matter.Constraint.create(global.Matter.Common.extend({bodyA:c,bodyB:s},r)))),a&&i<e-1&&(c=g[i+1+(n-1)*e],global.Matter.Composite.addConstraint(t,global.Matter.Constraint.create(global.Matter.Common.extend({bodyA:c,bodyB:s},r))))}return t.label+=" Mesh",t},t.pyramid=function(e,o,a,r,n,i,l){return t.stack(e,o,a,r,n,i,(function(t,o,i,s,c,g){var u=Math.min(r,Math.ceil(a/2)),p=c?c.bounds.max.x-c.bounds.min.x:0;if(!(s>u)&&!(i<(s=u-s)||i>a-1-s))return 1===g&&global.Matter.Body.translate(c,{x:(i+(a%2==1?1:-1))*p,y:0}),l(e+(c?i*p:0)+i*n,o,i,s,c,g)}))},t.newtonsCradle=function(t,e,o,a,r){for(var n=global.Matter.Composite.create({label:"Newtons Cradle"}),i=0;i<o;i++){var l=global.Matter.Bodies.circle(t+i*(1.9*a),e+r,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),s=global.Matter.Constraint.create({pointA:{x:t+i*(1.9*a),y:e},bodyB:l});global.Matter.Composite.addBody(n,l),global.Matter.Composite.addConstraint(n,s)}return n},e(t,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),t.car=function(t,e,o,a,r){var n=global.Matter.Body.nextGroup(!0),i=.5*-o+20,l=.5*o-20,s=global.Matter.Composite.create({label:"Car"}),c=global.Matter.Bodies.rectangle(t,e,o,a,{collisionFilter:{group:n},chamfer:{radius:.5*a},density:2e-4}),g=global.Matter.Bodies.circle(t+i,e+0,r,{collisionFilter:{group:n},friction:.8}),u=global.Matter.Bodies.circle(t+l,e+0,r,{collisionFilter:{group:n},friction:.8}),p=global.Matter.Constraint.create({bodyB:c,pointB:{x:i,y:0},bodyA:g,stiffness:1,length:0}),d=global.Matter.Constraint.create({bodyB:c,pointB:{x:l,y:0},bodyA:u,stiffness:1,length:0});return global.Matter.Composite.addBody(s,c),global.Matter.Composite.addBody(s,g),global.Matter.Composite.addBody(s,u),global.Matter.Composite.addConstraint(s,p),global.Matter.Composite.addConstraint(s,d),s},e(t,"car","Composites.car âž¤ moved to car example"),t.softBody=function(e,o,a,r,n,i,l,s,c,g){c=global.Matter.Common.extend({inertia:1/0},c),g=global.Matter.Common.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var u=t.stack(e,o,a,r,n,i,(function(t,e){return global.Matter.Bodies.circle(t,e,s,c)}));return t.mesh(u,a,r,l,g),u.label="Soft Body",u},e(t,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")}}},function(t,e,o){var a=o(5),r=o(16),n=o(15),i=o(17),l=o(6),s=o(7),c=o(12),g=o(0),u=o(4);t.exports=function(){if(!global.Matter||!global.Matter.Engine){global.Matter||(global.Matter={}),global.Matter.Engine={};var t=global.Matter.Engine;a(),r(),n(),i(),l(),s(),c(),g(),u(),t._deltaMax=1e3/60,t.create=function(t){t=t||{};var e=global.Matter.Common.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},t);return e.world=t.world||global.Matter.Composite.create({label:"World"}),e.pairs=t.pairs||global.Matter.Pairs.create(),e.detector=t.detector||global.Matter.Detector.create(),e.detector.pairs=e.pairs,e.grid={buckets:[]},e.world.gravity=e.gravity,e.broadphase=e.grid,e.metrics={},e},t.update=function(e,o){var a,i=global.Matter.Common.now(),l=e.world,s=e.detector,c=e.pairs,g=e.timing,u=g.timestamp;o>t._deltaMax&&global.Matter.Common.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",t._deltaMax.toFixed(3),"ms."),o=void 0!==o?o:global.Matter.Common._baseDelta,o*=g.timeScale,g.timestamp+=o,g.lastDelta=o;var p={timestamp:g.timestamp,delta:o};global.Matter.Events.trigger(e,"beforeUpdate",p);var d=global.Matter.Composite.allBodies(l),b=global.Matter.Composite.allConstraints(l);for(l.isModified&&(n.setBodies(s,d),global.Matter.Composite.setModified(l,!1,!1,!0)),e.enableSleeping&&global.Matter.Sleeping.update(d,o),t._bodiesApplyGravity(d,e.gravity),o>0&&t._bodiesUpdate(d,o),global.Matter.Events.trigger(e,"beforeSolve",p),global.Matter.Constraint.preSolveAll(d),a=0;a<e.constraintIterations;a++)global.Matter.Constraint.solveAll(b,o);global.Matter.Constraint.postSolveAll(d);var f=n.collisions(s);global.Matter.Pairs.update(c,f,u),e.enableSleeping&&global.Matter.Sleeping.afterCollisions(c.list),c.collisionStart.length>0&&global.Matter.Events.trigger(e,"collisionStart",{pairs:c.collisionStart,timestamp:g.timestamp,delta:o});var v=global.Matter.Common.clamp(20/e.positionIterations,0,1);for(r.preSolvePosition(c.list),a=0;a<e.positionIterations;a++)r.solvePosition(c.list,o,v);for(r.postSolvePosition(d),global.Matter.Constraint.preSolveAll(d),a=0;a<e.constraintIterations;a++)global.Matter.Constraint.solveAll(b,o);for(global.Matter.Constraint.postSolveAll(d),r.preSolveVelocity(c.list),a=0;a<e.velocityIterations;a++)r.solveVelocity(c.list,o);return t._bodiesUpdateVelocities(d),c.collisionActive.length>0&&global.Matter.Events.trigger(e,"collisionActive",{pairs:c.collisionActive,timestamp:g.timestamp,delta:o}),c.collisionEnd.length>0&&global.Matter.Events.trigger(e,"collisionEnd",{pairs:c.collisionEnd,timestamp:g.timestamp,delta:o}),t._bodiesClearForces(d),global.Matter.Events.trigger(e,"afterUpdate",p),e.timing.lastElapsed=global.Matter.Common.now()-i,e},t.merge=function(e,o){if(global.Matter.Common.extend(e,o),o.world){e.world=o.world,t.clear(e);for(var a=global.Matter.Composite.allBodies(e.world),r=0;r<a.length;r++){var n=a[r];global.Matter.Sleeping.set(n,!1),n.id=global.Matter.Common.nextId()}}},t.clear=function(t){global.Matter.Pairs.clear(t.pairs),n.clear(t.detector)},t._bodiesClearForces=function(t){for(var e=t.length,o=0;o<e;o++){var a=t[o];a.force.x=0,a.force.y=0,a.torque=0}},t._bodiesApplyGravity=function(t,e){var o=void 0!==e.scale?e.scale:.001,a=t.length;if((0!==e.x||0!==e.y)&&0!==o)for(var r=0;r<a;r++){var n=t[r];n.isStatic||n.isSleeping||(n.force.y+=n.mass*e.y*o,n.force.x+=n.mass*e.x*o)}},t._bodiesUpdate=function(t,e){for(var o=t.length,a=0;a<o;a++){var r=t[a];r.isStatic||r.isSleeping||global.Matter.Body.update(r,e)}},t._bodiesUpdateVelocities=function(t){for(var e=t.length,o=0;o<e;o++)global.Matter.Body.updateVelocities(t[o])}}}},function(t,e,o){var a=o(1),r=o(10),n=o(3),i=o(9),l=o(2);t.exports=function(){if(!global.Matter||!global.Matter.Query){global.Matter||(global.Matter={}),global.Matter.Query={};var t=global.Matter.Query;a(),r(),n(),i(),l(),t.collides=function(t,e){for(var o=[],a=e.length,r=t.bounds,n=global.Matter.Collision.collides,i=global.Matter.Bounds.overlaps,l=0;l<a;l++){var s=e[l],c=s.parts.length,g=1===c?0:1;if(i(s.bounds,r))for(var u=g;u<c;u++){var p=s.parts[u];if(i(p.bounds,r)){var d=n(p,t);if(d){o.push(d);break}}}}return o},t.ray=function(e,o,a,r){r=r||1e-100;for(var n=global.Matter.Vector.angle(o,a),i=global.Matter.Vector.magnitude(global.Matter.Vector.sub(o,a)),l=.5*(a.x+o.x),s=.5*(a.y+o.y),c=global.Matter.Bodies.rectangle(l,s,i,r,{angle:n}),g=t.collides(c,e),u=0;u<g.length;u+=1){var p=g[u];p.body=p.bodyB=p.bodyA}return g},t.region=function(t,e,o){for(var a=[],r=0;r<t.length;r++){var n=t[r],i=global.Matter.Bounds.overlaps(n.bounds,e);(i&&!o||!i&&o)&&a.push(n)}return a},t.point=function(t,e){for(var o=[],a=0;a<t.length;a++){var r=t[a];if(global.Matter.Bounds.contains(r.bounds,e))for(var n=1===r.parts.length?0:1;n<r.parts.length;n++){var i=r.parts[n];if(global.Matter.Bounds.contains(i.bounds,e)&&global.Matter.Vertices.contains(i.vertices,e)){o.push(r);break}}}return o}}}},function(t,e,o){var a=o(7),r=o(0);t.exports=function(){if(!global.Matter||!global.Matter.World){global.Matter||(global.Matter={}),global.Matter.World={};var t=global.Matter.World;a(),r(),t.create=global.Matter.Composite.create,t.add=global.Matter.Composite.add,t.remove=global.Matter.Composite.remove,t.clear=global.Matter.Composite.clear,t.addComposite=global.Matter.Composite.addComposite,t.addBody=global.Matter.Composite.addBody,t.addConstraint=global.Matter.Composite.addConstraint}}}])}));